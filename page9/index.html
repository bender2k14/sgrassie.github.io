
<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Stuart Grassie's Blog">
    <meta name="author" content="Stuart Grassie">
    <meta name="keywords" content="annoyance,asp.net,blog,Books,bootstrap,build script,C#,cathartic,Coding,delphi,design patterns,DI,Dropbox,editing,euler,exception,Git,github-api,IoC,Java,jQuery,linux,log4net,Logging,nancy,News,npoco,PHP,Plugin Manager,Powershell,prism,Project Euler,psake,random,RestSharp,sandra.snow,self pity,snow,Source Control,structuremap,thoughts,Uncategorized,vim,winner,wpf" />
    <title>temporalcohesion.co.uk</title>

    <!-- Bootstrap core CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <!-- Optional theme -->
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

    <!-- Custom styles for this template -->
    <link href="/stylesheets/custom-styles.css" rel="stylesheet" type="text/css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="canonical" href="http://www.temporalcohesion.co.uk/page9/" />
</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">temporalcohesion.co.uk</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/contact">Contact</a></li>
            <li><a href="/archive">Archives</a></li>
          </ul>
	  <ul class="nav navbar-nav navbar-right">
		  <li><a href="http://twitter.com/stugrassie"><img src="/images/twitter.png"></a></li>
		  <li><a href="http://facebook.com/sgrassie"><img src="/images/facebook.png"></a></li>
		  <li><a href="http://uk.linkedin.com/in/sgrassie/"><img src="/images/linkedin.png"></a></li>
	  </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">
	

<div class="post">
	<h1 class="title">
		<a href="/2009/05/25/writing-a-generic-plugin-manager-in-c/">Writing a generic plugin manager in C#</a> <small>Monday, 25 May, 2009</small>
	</h1>
   <div class="meta">
	   <ul class="list-unstyled list-inline">
			<li><a href="/category/C#" title="C#">C#</a></li>
			<li><a href="/category/C#" title="C#">C#</a></li>
			<li><a href="/category/Coding" title="Coding">Coding</a></li>
			<li><a href="/category/Plugin Manager" title="Plugin Manager">Plugin Manager</a></li>
	   </ul>
   </div>
            
   
   
<h4>Update:</h4>

<p>I have written another post on this subject with some code examples  here: <a title="More on the generic plugin manager" href="http://temporalcohesion.co.uk/2009/11/02/more-on-the-generic-plugin-manager/" target="_self">http://temporalcohesion.co.uk/2009/11/02/more-on-the-generic-plugin-manager/</a></p>

<h4>Update 2:</h4>

<p>There is another follow on post here: <a href="http://temporalcohesion.co.uk/2010/03/17/even-more-on-the-generic-plugin-manager/">http://temporalcohesion.co.uk/2010/03/17/even-more-on-the-generic-plugin-manager/</a> where I talk about what I've learned.</p>

<p>One of my current long term hobby project is a  map/world editor that I'm writing for Andy's (work in progress) game engine. It is still in a quite rudimentary stage, however, I have gotten an important aspect of the application into a fairly mature state already, and that is the plugin system.</p>

<p>I don't want to get into too much detail over things that are available via some simple searches on google, so don't expect too much code. There are some good articles <a title="http://msdn.microsoft.com/en-us/library/ms972962.aspx" href="http://" target="_blank">here</a>, <a title="http://www.codeproject.com/KB/macros/PluginsManager.aspx?display=Print" href="http://" target="_blank">here </a>and <a title="http://www.codeproject.com/KB/cs/Plugin_Basics.aspx" href="http://" target="_blank">here</a>, which delve quite deeply into this, and how to develop a plugin framework in general. I developed my plugin framework based on the code in <a title="http://www.amazon.com/2008-NET-Platform-Fourth-Windows-Net/dp/1590598849" href="http://" target="_blank">this book</a>, which incidentally is a very good book.</p>

<p>Also, in my own google searches on this subject, a lot of the articles I found are getting to be four years old, in a few instances even older. Not that this automatically makes them invalid as sources of information, it's just that they may not reflect best practices in modern C#. (Not that I am claiming to be a <a title="http://msmvps.com/blogs/jon_skeet/default.aspx" href="http://" target="_blank">Jon Skeet</a>-like C# guru). Also, quite a few of the ones I found make use of an XML configuration file to hold a reference to the plugins. I'm not a big fan of this type of thing, I much prefer convention over configuration.</p>

<p><strong>Why Generic?</strong></p>

<p>I've written a plugin system for the Editor because I want to provide a way to make it easily extendible in the future, without having to change the core application, to enable it to perform actions that are above and beyond it's core capabilities. Byond that basic requirement, there are a couple of other reasons to make it a generic plugin framework.</p>

<p>Firstly, I've made it generic because I wanted to make a distinction between different types of plugins, such as a type of plugin for resources, and a type of plugin which adds functionality into the application (such as tools, UI widgets etc).</p>

<p>Secondly, and perhaps most important (to me, anyway), is that I'll never need to write a C# plugin framework again, for any of my personal projects. I've had a go at writing a plugin framework before, a few times for none-work projects and once for a project at work, and I finally realised what my problem was - reinventing the wheel each time.</p>

<p>The plugin framework I've written ensures that I don't have to worry about this the next time one of my pet projects needs a plugin system. The Editor will in fact have two types of plugins available, one to extend the types of data sources it can load in resources from, and another to provide additional functionality, like tools.</p>

<p>I'm fairly pleased with the way that it has turned out, and it works quite well in practice.</p>
 
   <hr />
</div><!--/.post-->
<div class="post">
	<h1 class="title">
		<a href="/2008/09/12/building-the-project-euler-framework-part-3/">Building the Project Euler framework, part 3</a> <small>Friday, 12 Sep, 2008</small>
	</h1>
   <div class="meta">
	   <ul class="list-unstyled list-inline">
			<li><a href="/category/Coding" title="Coding">Coding</a></li>
			<li><a href="/category/Coding" title="Coding">Coding</a></li>
			<li><a href="/category/Java" title="Java">Java</a></li>
			<li><a href="/category/Java" title="Java">Java</a></li>
			<li><a href="/category/Project Euler" title="Project Euler">Project Euler</a></li>
			<li><a href="/category/Project Euler" title="Project Euler">Project Euler</a></li>
	   </ul>
   </div>
            
   
   
<p>In part 2, I showed you an improved, although still pretty basic problem runner framework for Project Euler. I did leave out some things though, and I'm going to try and explain them now.</p>

<p>Firstly, I haven't really shown how I use the Problem interface. You can see it in part 1 of this series of posts. In Eclipse, you can create a new class in a package, which should bring up the "New Java Class" dialog. Give the class a name - for Project Euler problems I've chosen to name them "One", "Two", "Three" etc. You can then add an interface that the class is to implement, click 'Add', and type in Problem. You can also choose some methods to stub out, tick 'public static void main(String[] args)'. Click Ok, and you should get something like this:</p>

<pre lang="java">package co.uk.temporalcohesion.euler.problems;

import co.uk.temporalcohesion.euler.interfaces.Problem;

public class One implements Problem {

    public String answer() {
        // TODO Auto-generated method stub
        return null;
    }

    public int id() {
        // TODO Auto-generated method stub
        return 0;
    }

    public double time() {
        // TODO Auto-generated method stub
        return 0;
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

    }

}</pre>

<p>I can hear you asking why am I including then main(String[] args) function if we already have a class that is capable of running the problems (the main Euler class)? Well, what I do to create is to create a Euler object in the problems main method, and get it to run the problem, like this:</p>

<pre lang="java">        /**
     * @param args
     */
    public static void main(String[] args) {
        new Euler().run(1, true);
    }</pre>

<p>So the problem class is running itself using the Euler object, which knows how to find the problem, instantiate it and run it. I find doing things this way is easier when working on the problem, as you can simply run the problem as a java application, and it will output the result in a standard format we are expecting to to the console in Eclipse.</p>

<p>Thinking about it, you might be wondering - what's the point of all this, it seems a little excessive for something that can be done fairly easily? Well - I've done it like this because the whole point of me doing the problems on Project Euler, is to practice problem solving and become more comfortable in my use of Java. So I think what I've done is pretty valid in that regard.</p>
 
   <hr />
</div><!--/.post-->
<div class="post">
	<h1 class="title">
		<a href="/2008/09/05/building-the-project-euler-framework-part-2/">Building the Project Euler framework, part 2</a> <small>Friday, 05 Sep, 2008</small>
	</h1>
   <div class="meta">
	   <ul class="list-unstyled list-inline">
			<li><a href="/category/Coding" title="Coding">Coding</a></li>
			<li><a href="/category/Coding" title="Coding">Coding</a></li>
			<li><a href="/category/Java" title="Java">Java</a></li>
			<li><a href="/category/Java" title="Java">Java</a></li>
			<li><a href="/category/Project Euler" title="Project Euler">Project Euler</a></li>
			<li><a href="/category/Project Euler" title="Project Euler">Project Euler</a></li>
	   </ul>
   </div>
            
   
   
<p>In Part 1, I showed a basic problem runner framework for Project Euler, however there are a number of ways in which we can improve it. For example:</p>

<ul>
    <li>How can we run a specific problem?</li>
    <li>How can we hide the answer, but still run the problem?</li>
    <li>How can we avoid manually adding problems to the List of problems?</li>
    <li>Not really to do with the framework, but how can we automate building everything?</li>
</ul>

<p>I'll demonstrate some ways that we can do all that, except for the 4th option, which is handled by Ant.</p>

<h2>Improving the framework</h2>

<p>The first thing that we can do is to add a utility function that handles showing the answers, this way we only have one place in the code that we need to update when we want to change how the answers are shown.</p>

<pre lang="java">private void showAnswers(Problem problem){
        System.out.println("Problem: " + problem.id() + ". Answer: "
                + problem.answer() + ". Time: " + problem.time() + "s");</pre>

<p>}</p>

<p>To run a specific problem, we need to overload the <em>run()</em> function to access the problem we want, and show the answer.</p>

<pre lang="java">public void run(int i) {
        try{
            Problem problem = (Problem) problems.get(i);/* problem list starts at 0 */

            if (problem != null) {
                showAnswers(problem);
            }
            else {
                System.out.println("There doesn't appear to be an answer for problem " + i);
            }

        } catch (IndexOutOfBoundsException e){
            System.err.println("There doesn't appear to be an answer for problem " + i);
        }

    }</pre>

<p>As you can see, we get the specified problem out of the list, and use our new <em>showAnswers()</em> function to display the answer.� I've tried to include some good error checking - we might try to get a problem that doesn't exist.</p>

<p>In order to prevent the answer from being shown, we can add a boolean parameter to the <em>run()</em> and <em>showAnswers()</em> functions.</p>

<pre lang="java">private void showAnswers(Problem problem, boolean showAnswers){
        if(showAnswers){
            System.out.println("Problem: " + problem.id() + ". Answer: "
                    + problem.answer() + ". Time: " + problem.time() + "s");
            }
            else {
                problem.answer(); /* we still need to work out the answer */
                System.out.println("Problem: " + problem.id() + ". Time: " + problem.time() + "s");
            }
    }

public void run(boolean showAnswers) {
        for (Problem problem : problems) {
            if (problem != null) {
                showAnswers(problem, showAnswers);
            }
        }
    }</pre>

<p>Dont't forget to change the overloaded <em>run(int i)</em> to <em>run(int i, boolean showAnswers)</em>. This way we can control exactly� whether to show the answers when we run all the problems, or to show the answer if we run a specific problem.</p>

<p>One thing remains to do, and that is to correctly parse the command line arguments to control whether the answers are shown or not. We want to handle something like this:</p>

<p>C:developmenteuler&gt;java -jar ProjectEuler.jar 42 -noanswer</p>

<p>Where 42 is problem 42, and -noanswer clearly specifies not to show the answer. We'll also need to handle all combinations of this as well, such as:</p>

<p>C:developmenteuler&gt;java -jar ProjectEuler.jar 42</p>

<p>Which should show the answer. I'm not going to show my code for parsing the command line arguements, I'll leave that as an exercise for the reader, as I believe that it is adequately covered elsewhere on the internet, and in any number of Java books.</p>

<p>The more astute among you will notice that I've not mentioned how we are going to avoid manually adding problems to the List of problems. I'll cover that next time.</p>
 
   <hr />
</div><!--/.post-->
<div class="post">
	<h1 class="title">
		<a href="/2008/08/29/source-control-using-dropbox/">Source control using Dropbox</a> <small>Friday, 29 Aug, 2008</small>
	</h1>
   <div class="meta">
	   <ul class="list-unstyled list-inline">
			<li><a href="/category/Coding" title="Coding">Coding</a></li>
			<li><a href="/category/Coding" title="Coding">Coding</a></li>
	   </ul>
   </div>
            
   
   
<p>Everyone developer should use some form of <a title="Wikipedia entry on source control" href="http://en.wikipedia.org/wiki/Source_control" target="_blank">source control</a>. It's like an unwritten law, if you don't use it, then you should - as long as it isn't <a title="Jeff Atwood on why you shouldn't use sourcesafe" href="http://www.codinghorror.com/blog/archives/000660.html" target="_blank">sourcesafe</a>.</p>

<p>A few weeks ago, I recently managed to get hold of an invite to <a title="get dropbox" href="http://www.getdropbox.com/" target="_blank">Dropbox</a>, which describes itself as "Secure back up, sync and sharing made easy". I've been using it both as a basic form of source control, and because I always tend to forget my usb pendrive, as a portable storage device.</p>

<p>The great thing about Dropbox is that you get 2gb of free storage. So far, I've sync'd a few photo's, some word documents and pdf's and the Java source for my Project Euler code, and according to the Dropbox client on my laptop, I've used 0.1% of 2gb. This is more than enough for me, and more than likely I'll use it for some more coding projects. I'd like to see how a Visual Studio project takes to being sync'd across different computers.</p>

<p>With Dropbox, you get complete file history, so if you mistakenly remove some code that turns out to be pretty vital... you can get it back using the simple to use web interface. While you can share folders, and allow people to modify shared folders, I'm not too sure that it would work too well for collaborative software development. I think it would be far better to get a proper form of source control running on a server both parties have access to. There are plenty of proper source control providers out there with free options, and I am considering moving my code onto one of those, if I can find one that has a reasonable yearly subscription.</p>

<p>For my current requirements, it suits me just fine. I realise that Dropbox is not intended to be a source control system, however... When the client is able to sync specific folders that you tell it to, it will be perfect.</p>
 
   <hr />
</div><!--/.post-->
<div class="post">
	<h1 class="title">
		<a href="/2008/08/22/building-the-project-euler-framework-part-1/">Building the Project Euler framework, part 1</a> <small>Friday, 22 Aug, 2008</small>
	</h1>
   <div class="meta">
	   <ul class="list-unstyled list-inline">
			<li><a href="/category/Coding" title="Coding">Coding</a></li>
			<li><a href="/category/Coding" title="Coding">Coding</a></li>
			<li><a href="/category/Java" title="Java">Java</a></li>
			<li><a href="/category/Java" title="Java">Java</a></li>
			<li><a href="/category/Project Euler" title="Project Euler">Project Euler</a></li>
			<li><a href="/category/Project Euler" title="Project Euler">Project Euler</a></li>
	   </ul>
   </div>
            
   
   
<p>As promised, here is the first part of the series of posts I hope to write demonstrating how I wrote my problem runner framework for <a title="Project Euler!" href="http://projecteuler.net/" target="_blank">Project Euler</a>.</p>

<p>Firstly, before you continue reading, I suggest that you research the <a title="The Command pattern on Wikipedia" href="http://en.wikipedia.org/wiki/Command_pattern" target="_blank">Command</a> pattern, Google will also provide you with some good sources in your research.</p>

<p>Done? Ok then. It shouldn't matter what IDE you use, I am using Eclipse (ganymede), any IDE should do. If you don't know what an IDE is, then go and find out, and then come back.</p>

<h2>Start Coding</h2>

<p>In your IDE, and following the <a title="Java package naming conventions" href="http://java.sun.com/docs/codeconv/html/CodeConventions.doc8.html" target="_blank">Java package naming conventions</a>, create a package to hold the Project Euler code, for example: co.uk.temporalcohesion.euler.problems. Because we are going to need an interface, also create a package to hold those, as this can help keep things more organised, for example: co.uk.temporalcohesion.euler.interfaces</p>

<p>Let's define that interface</p>

<pre lang="java">public interface Problem {

    /**
     * Answer method. Returns the answer for the problem
     * @return - the integer answer to the problem
     */
    String answer();

    /**
     * The problem number.
     * @return - The number of the problem
     */
    int id();

    /**
     * How long does it take to work out the answer?
     * @return - The time in seconds it takes to work out the answer to the problem
     */
    double time();
}</pre>

<p>Before we move on an implement that interface in a problem, let's write the basic problem runner itself. We'll need a way to register an instance of a problem, and a way to run the problem and get the answer.</p>

<pre lang="java">public class Euler {
    private List&lt;Problem&gt; problems = new ArrayList();

    public Euler() {
        problems.add(new One());
    }

    private void run() {
        for (Problem prob : problems) {
            System.out.println("Problem " + prob.id() + ": " + prob.answer());
        }
    }

    public static void main(String[] args) {
        new Euler().run();
    }
}</pre>

<p>That's pretty much all you need for a basic problem runner. You just register an instance of each problem you write into the problems List object in the constructor, and run the program, and it iterates through each Problem in the List, and outputs the answer.</p>

<p>I'm not going to give you the code to problem one, however it is pretty trivial if you know what the modulus operator is used for...</p>

<p>As you can see, the problem runner itself is fairly basic, and does present some immediate areas of improvement, such as running a specific problem.</p>

<p>I'll cover that next time.</p>
 
   <hr />
</div><!--/.post-->

  <!-- Pagination links -->
  <div id="post-pagination" class="pagination">

   
      <p class="previous">
        <a href="/page8">Previous Page</a>
        </p>


    <p class="previous">
      <a href="/page10">Next Page</a>
    </p>

  </div>


        
        <hr />
        <footer>
            <p>&copy; temporalcohesion.co.uk 2014 | Powered by <a href="https://github.com/Sandra/Sandra.Snow" rel="generator">Sandra.Snow</a></p>
        </footer>

    </div><!-- /.container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>

    <script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-9870754-1']);
_gaq.push(['_trackPageview']);
        
(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>

    <script src="/javascripts/prettify.js"></script>
    <script type='text/javascript'>
      $(function () {
        $("pre code").parent().each(function () {
          if (!$(this).hasClass("prettyprint")) {
            $(this).addClass("prettyprint");
            a = true
          }
        });

        prettyPrint();
      });
    </script>
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?skin=sons-of-obsidian"></script>

    <script src="/javascripts/cohesion.js"></script>
</body>
</html>
