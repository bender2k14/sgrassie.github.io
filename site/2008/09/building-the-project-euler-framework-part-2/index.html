
<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="last-modified" content="2014-02-02T23:21:26.1273517+00:00" />
    <meta name="keywords" content="Coding,Coding,Java,Java,Project Euler,Project Euler" />
    <title>Snow Byte</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css" />
    <link rel="canonical" href="http://www.philliphaydon.com/2008/09/building-the-project-euler-framework-part-2/" />
</head>
<body class="home blog">
    <div id="page" class="hfeed site">
        <header id="masthead" class="site-header" role="banner">
            <hgroup>
                <h1 class="site-title"><a href="/" title="Snow Byte" rel="home">Snow Byte</a>
                <p><small>Minimal Sandra.Snow Theme.</small></p></h1>
            </hgroup>
            <nav role="navigation" class="site-navigation main-navigation">
                <h1 class="assistive-text">Menu</h1>
                <div class="assistive-text skip-link"><a href="#content" title="Skip to content">Skip to content</a></div>
                <div class="menu">
                    <ul>
                        <li><a href="/" class="home"><i class="fa fa-home"></i></a></li>
                        <li><a href="/about">About</a></li>
                        <li><a href="/category">Categories</a></li>
                        <li><a href="/archive">Archive</a></li>
                        <li><a href="/rss">RSS</a></li>
                        <li><a href="/feed">Atom</a></li>
                    </ul>
                </div>
            </nav>
        </header>
        <div id="main">
            <div id="primary" class="site-content">
                <div id="content" role="main">
                  

<div class="post">
    <h1>Building the Project Euler framework, part 2</h1> 
      <div class="meta">
        <p class="posted">05 Sep 2008</p>
        <ul class="categories">
          <li><a href="/category/coding" title="Snow.Models.Category">Coding</a></li>
          <li><a href="/category/coding" title="Snow.Models.Category">Coding</a></li>
          <li><a href="/category/java" title="Snow.Models.Category">Java</a></li>
          <li><a href="/category/java" title="Snow.Models.Category">Java</a></li>
          <li><a href="/category/project-euler" title="Snow.Models.Category">Project Euler</a></li>
          <li><a href="/category/project-euler" title="Snow.Models.Category">Project Euler</a></li>
        </ul>
      </div>

      <!--div class="addthis_toolbox addthis_default_style" style="float:right;">
        <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
        <a class="addthis_button_tweet"></a>
        <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
        <a class="addthis_button_linkedin_counter"></a>
        <a class="addthis_counter addthis_pill_style"></a>
      </div-->
    </div>
    
    
        
    <p>In Part 1, I showed a basic problem runner framework for Project Euler, however there are a number of ways in which we can improve it. For example:</p>

<ul>
    <li>How can we run a specific problem?</li>
    <li>How can we hide the answer, but still run the problem?</li>
    <li>How can we avoid manually adding problems to the List of problems?</li>
    <li>Not really to do with the framework, but how can we automate building everything?</li>
</ul>

<p>I'll demonstrate some ways that we can do all that, except for the 4th option, which is handled by Ant.</p>

<h2>Improving the framework</h2>

<p>The first thing that we can do is to add a utility function that handles showing the answers, this way we only have one place in the code that we need to update when we want to change how the answers are shown.</p>

<pre lang="java">private void showAnswers(Problem problem){
        System.out.println("Problem: " + problem.id() + ". Answer: "
                + problem.answer() + ". Time: " + problem.time() + "s");</pre>

<p>}</p>

<p>To run a specific problem, we need to overload the <em>run()</em> function to access the problem we want, and show the answer.</p>

<pre lang="java">public void run(int i) {
        try{
            Problem problem = (Problem) problems.get(i);/* problem list starts at 0 */

            if (problem != null) {
                showAnswers(problem);
            }
            else {
                System.out.println("There doesn't appear to be an answer for problem " + i);
            }

        } catch (IndexOutOfBoundsException e){
            System.err.println("There doesn't appear to be an answer for problem " + i);
        }

    }</pre>

<p>As you can see, we get the specified problem out of the list, and use our new <em>showAnswers()</em> function to display the answer.� I've tried to include some good error checking - we might try to get a problem that doesn't exist.</p>

<p>In order to prevent the answer from being shown, we can add a boolean parameter to the <em>run()</em> and <em>showAnswers()</em> functions.</p>

<pre lang="java">private void showAnswers(Problem problem, boolean showAnswers){
        if(showAnswers){
            System.out.println("Problem: " + problem.id() + ". Answer: "
                    + problem.answer() + ". Time: " + problem.time() + "s");
            }
            else {
                problem.answer(); /* we still need to work out the answer */
                System.out.println("Problem: " + problem.id() + ". Time: " + problem.time() + "s");
            }
    }

public void run(boolean showAnswers) {
        for (Problem problem : problems) {
            if (problem != null) {
                showAnswers(problem, showAnswers);
            }
        }
    }</pre>

<p>Dont't forget to change the overloaded <em>run(int i)</em> to <em>run(int i, boolean showAnswers)</em>. This way we can control exactly� whether to show the answers when we run all the problems, or to show the answer if we run a specific problem.</p>

<p>One thing remains to do, and that is to correctly parse the command line arguments to control whether the answers are shown or not. We want to handle something like this:</p>

<p>C:developmenteuler&gt;java -jar ProjectEuler.jar 42 -noanswer</p>

<p>Where 42 is problem 42, and -noanswer clearly specifies not to show the answer. We'll also need to handle all combinations of this as well, such as:</p>

<p>C:developmenteuler&gt;java -jar ProjectEuler.jar 42</p>

<p>Which should show the answer. I'm not going to show my code for parsing the command line arguements, I'll leave that as an exercise for the reader, as I believe that it is adequately covered elsewhere on the internet, and in any number of Java books.</p>

<p>The more astute among you will notice that I've not mentioned how we are going to avoid manually adding problems to the List of problems. I'll cover that next time.</p>


    <div id="disqus_thread"></div>
<script>
    var reset_disqus = function(){
        DISQUS.reset({
            reload: true,
            config: function () {
                //this.page.identifier = '';
                this.page.url = 'http://www.philliphaydon.com/2008/09/building-the-project-euler-framework-part-2/';
                //this.page.title = '';
            }
        });
    };

    var disqus_shortname = '*disqus id*';
    var disqus_url = 'http://www.philliphaydon.com/2008/09/building-the-project-euler-framework-part-2/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    window.addEventListener('orientationchange', reset_disqus);
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-****"></script>

</div>
                </div>
                <!-- #content -->
            </div>
            <!-- #primary .site-content -->
        </div>
        <!-- #main -->

        <footer class="site-footer" role="contentinfo">
            <div class="site-info">
                Powered by <a href="https://github.com/Sandra/Sandra.Snow" rel="generator">Sandra.Snow</a>.	
            </div>
            <!-- .site-info -->
        </footer>
        <!-- #colophon .site-footer -->
    </div>
    <!-- #page .hfeed .site -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src='/javascripts/prettify.js' type='text/javascript'></script>
    
    <script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-######-##']);
_gaq.push(['_trackPageview']);
        
(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>
    
    <script type='text/javascript'>
      $(function () {
        $("pre code").parent().each(function () {
          if (!$(this).hasClass("prettyprint")) {
            $(this).addClass("prettyprint");
            a = true
          }
        });

        prettyPrint();
      });
    </script>
</body>
</html>
