
<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="last-modified" content="2014-02-02T23:21:26.1273517+00:00" />
    <meta name="keywords" content="annoyance,Books,build script,C#,cathartic,Coding,delphi,design patterns,DI,Dropbox,editing,euler,exception,Git,github-api,IoC,Java,jQuery,linux,log4net,Logging,News,PHP,Plugin Manager,Powershell,Project Euler,psake,random,RestSharp,self pity,Source Control,thoughts,Uncategorized,vim,winner" />
    <title>Snow Byte</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css" />
    <link rel="canonical" href="http://www.philliphaydon.com/page3/" />
</head>
<body class="home blog">
    <div id="page" class="hfeed site">
        <header id="masthead" class="site-header" role="banner">
            <hgroup>
                <h1 class="site-title"><a href="/" title="Snow Byte" rel="home">Snow Byte</a>
                <p><small>Minimal Sandra.Snow Theme.</small></p></h1>
            </hgroup>
            <nav role="navigation" class="site-navigation main-navigation">
                <h1 class="assistive-text">Menu</h1>
                <div class="assistive-text skip-link"><a href="#content" title="Skip to content">Skip to content</a></div>
                <div class="menu">
                    <ul>
                        <li><a href="/" class="home"><i class="fa fa-home"></i></a></li>
                        <li><a href="/about">About</a></li>
                        <li><a href="/category">Categories</a></li>
                        <li><a href="/archive">Archive</a></li>
                        <li><a href="/rss">RSS</a></li>
                        <li><a href="/feed">Atom</a></li>
                    </ul>
                </div>
            </nav>
        </header>
        <div id="main">
            <div id="primary" class="site-content">
                <div id="content" role="main">
                  

  <ul class="posts">
    <li class="post">
      <h1><a href="/2010/03/revisting-the-project-euler-problem-runner/">Revisting the Project Euler problem runner</a></h1> 
      <div class="meta">
        <p class="posted">23 Mar 2010</p>
        <ul class="categories">
          <li><a href="/category/design patterns" title="design patterns">design patterns</a></li>
          <li><a href="/category/euler" title="euler">euler</a></li>
          <li><a href="/category/Java" title="Java">Java</a></li>
          <li><a href="/category/Java" title="Java">Java</a></li>
          <li><a href="/category/Project Euler" title="Project Euler">Project Euler</a></li>
        </ul>
      </div>
      
      <p>I'm sure that you must have heard about <a title="Project Euler website" href="http://projecteuler.net/" target="_blank">Project Euler</a>, which "is a series of challenging mathematical/computer programming problems that  will require more than just mathematical insights to solve". I have blogged about tackling the Project Euler problems <a href="http://temporalcohesion.co.uk/2008/08/22/building-the-project-euler-framework-part-1/">before</a>, and at the time, I developed a simple program to try to automate running the problems.</p>

<p>That was about 18 months ago, I've learned a lot since then and I think that it is high time to take a look back at the code and see if I can spot if there is any room for improvement.</p>

<h2>The current project</h2>

<p>[caption id="attachment_191" align="alignleft" width="240" caption="Current structure"]<a href="http://temporalcohesion.co.uk/wp-content/uploads/2010/03/eulerprojectold.png"><img class="size-medium wp-image-191 " title="eulerprojectold" src="http://temporalcohesion.co.uk/wp-content/uploads/2010/03/eulerprojectold-300x241.png" alt="The current structure of the project" width="240" height="193" /></a>[/caption]</p>

<p>Let's have a look at how I structured the project when I set it up. The first thing that you will notice, is that I messed up the package names. It should be "uk.co", and not "co.uk", according to the <a title="Java Language specification on sun.com" href="http://java.sun.com/docs/books/jls/third_edition/html/packages.html#7.7" target="_blank">Java language specification</a>. A minor point, and not really a big deal, we can easily sort it out.</p>

<p>Something else I did, was lump everything together into the same project and package - the runner program, the utils (e.g. helper classes that you write as you progress through problems), resources and the problems themselves.</p>

<p>I don't think that this was necessarily a bad idea at the time, I don't think that it is inherintly a bad idea now, it's logical for everything to share the same package. Or should I say, it <em>was </em>logical for everything to share the same package.</p>

<p>I am going to put the code for the problem runner onto Github, but I don't want to share the answers to the problems. To answer your question, I think that it goes against the point of Project Euler, that of having a set of problems that the inquisitive person can solve with some math and programming. I have also found that the problems also help in getting comfortable with the syntax of a new programming language - after all the solutions to the problems remain the same, however the implementation is subtley different depending on the language being used.</p>

<h2>Re-Design</h2>

<p>Examining the current code and design, we can immediately identify some changes which we are going to make� I'm going to seperate the uk.co.temporalcohesion.euler package into three packages, which are more distinct from each other, but still keep them all in the same project. Why? Well, it is obvious that there are three tasks which we have to manage:</p>

<ol>
    <li>Running problems.</li>
    <li>Provide an API to run the problems.</li>
    <li>Store the problems somewhere</li>
</ol>

<p>To shed some light on my thinking here, lets examine these in more detail. This will also identify areas of possible improvement in the design.</p>

<ol>
<li><p>I want someway of consistenly running a problem (or group of problems) to test the solution(s) to (a) Project Euler problem(s). This is basically our console runner application, which doesn't have to know exactly how this happens, it recieves input, and returns output - how that output is generated is irrelevant to it.</p></li>
<li><p>I want an easy to use API which I can leverage to easily implement the solution to a Project Euler problem, so that I don't have to worry about re-writing all the input/output code over and over again. I also want to be able to share this API, without sharing the answers to the problems themselves.</p></li>
<li><p>I need to have somewhere I can put the answers to the problems, and associated helper classes (Prime number generators, etc) which I can easly backup, and easily run the problems from.</p></li>
</ol>

<p>These are sounding a bit like user stories, and I suppose they are. They can be formalised as so:</p>

<blockquote>
<p style="text-align: left;">As a Problem Solver, I want to run the solution, or group of solutions, to a Project Euler problem.</p>
<p style="text-align: left;">As a problem solver, I want to concentrate implementing the solution to a euler problem, not on implementing input/output for the problem.</p>
<p style="text-align: left;">As a problem solver, I want a place to develop and store the problems, from which I can run the problems to test the solution.</p>
</blockquote>

<p style="text-align: left;">Fairly concise and simple requirements, which we will revisit later. We still have to examine the code in a little more detail so that we can identify exactly what it is we are going to refactor.</p>

<h2 style="text-align: left;">Code review</h2>

<p>The main class to examine is Euler, in Euler.java.� The first to say without even looking at the code, is that the name is fairly awful. Then when we examine the code in more detail, we can see the name is even worse. The class has the main entry point for the program, as well as all the code to actually run the problems. This class is doing everything, there is definately no Seperation of Concerns. It is responsible for accepting user input, loading and running the problems and displaying the output. Wow.</p>

<p>The class is designed around the <a title="Command Patter on Wikipedia" href="http://en.wikipedia.org/wiki/Command_pattern" target="_blank">Command Pattern</a>, and it has worked quite well. Looking at it now, a further two patterns could be used, namely <a title="Strategy patter on Wikipedia" href="http://en.wikipedia.org/wiki/Strategy_pattern" target="_blank">Strategy </a>and <a title="Template method pattern on Wikipedia" href="http://en.wikipedia.org/wiki/Template_method_pattern" target="_blank">Template method</a>.I'm still in two minds about refactoring the design pattern in use, but that discussion can be put off for the time being, as I have other things to concern me.</p>

<p>There are 144 SLoC, not a massive amount, but when you consider the above and what the class should be doing, then it is clearly a bit weighty. There are 7 functions in total, not counting the constructor, not a massive count, but as the SLoC count indicates, some of those functions are a bit long. The worst offender is the following method.</p>

<pre class="lang:java decode:1 " >

private void loadClasses() {
 InputStream fis = null;

 Properties p = new Properties();

 try {
 fis = ClassLoader
 .getSystemResourceAsStream(&amp;quot;co/uk/temporalcohesion/euler/resources/problems.properties&amp;quot;);
 p.load(fis);

 Enumeration&amp;lt;?&amp;gt; e = p.propertyNames();
 while (e.hasMoreElements()) {
 String key = (String) e.nextElement();
 String value = (String) p.getProperty(key);

 Object o = Class.forName(value).newInstance();
 if( ( o != null) &amp;amp;&amp;amp; (o instanceof Problem)){
 Problem problem = (Problem)o;
 problems.put(Integer.parseInt(key), problem);
 }
 }
 }

 catch (FileNotFoundException e) {
 e.printStackTrace();
 } catch (IOException e) {
 e.printStackTrace();
 } catch (ClassNotFoundException e) {
 e.printStackTrace();
 } catch (InstantiationException e) {
 e.printStackTrace();
 } catch (IllegalAccessException e) {
 e.printStackTrace();
 } catch (ClassCastException e) {

 }
 finally {
 try {
 fis.close();
 } catch (IOException e) {
 e.printStackTrace();
 }
 }
 }

</pre>

<p>Wow, that's a lot of code for something which is relatively straightforward. It's not exactly easy to read, and it violoates the Single Responsibility Principle: by loading in and enumerating over a properties file, instantiating new instances of problem classes, and handling all the exceptions which can be thrown. There will definately be some room for improvement there.</p>

<p>Getting back to the main <em>Euler </em>class as a whole, there is an even worse problem...</p>

<p>There are no unit tests!</p>

<p>This is a disastrous situation, because it means I cannot refactor the class with any confidence. The me of 18 months ago has a lot to answer for. I've got a bit of work to do. Check back next time to see how I've progressed things.</p>

<p style="text-align: left;"></p>

      <p><a href="/2010/03/revisting-the-project-euler-problem-runner/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2010/03/even-more-on-the-generic-plugin-manager/">Even more on the generic plugin manager</a></h1> 
      <div class="meta">
        <p class="posted">17 Mar 2010</p>
        <ul class="categories">
          <li><a href="/category/C#" title="C#">C#</a></li>
          <li><a href="/category/Coding" title="Coding">Coding</a></li>
          <li><a href="/category/DI" title="DI">DI</a></li>
          <li><a href="/category/IoC" title="IoC">IoC</a></li>
          <li><a href="/category/Plugin Manager" title="Plugin Manager">Plugin Manager</a></li>
        </ul>
      </div>
      
      <p>I've <a title="Writing a generic plugin manager in C# @ Temporal Cohesion" href="http://temporalcohesion.co.uk/2009/05/25/writing-a-generic-plugin-manager-in-c/" target="_self">written </a><a title="More on the generic plugin manager" href="http://temporalcohesion.co.uk/2009/11/02/more-on-the-generic-plugin-manager/" target="_self">previously</a> about writing your own generic plugin manager/framework.</p>

<p>I believe that this is a worthwhile exercise for the beginning programmer, because it firstly teaches you a lot about reflection, and secondly teaches you the advantages that proper use of interfaces can bring to your code. Thirdly it can also teach you to think about how your API might be used by someone else when they write a plugin for your program. In short I think it's a great exercise.</p>

<p>While writing and using my own plugin framework has been a great learning experience for me, I've found that I have outgrown it's usefulness to me. What made me see this was when I started to think about and begin implementing a way for me to use the framework as a <a title="Dependency Injection on Wikipedia" href="http://en.wikipedia.org/wiki/Dependency_injection" target="_blank">IoC/Dependency Injection</a> tool. This led me off on some Googling and I found <a title="Funq DI container on Codeplex" href="http://funq.codeplex.com/" target="_blank">Funq</a>, and the the <a href="http://www.clariusconsulting.net/blogs/kzu/archive/2009/02/02/116399.aspx" target="_blank">associated screencasts by Cazzulino</a>.</p>

<p>This got me to thinking about <a title="Don't Repeat Yourself on Wikipedia" href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself" target="_blank">DRY</a>. Don't Repeat Yourself can just as easily mean Don't Repeat Work Other People Have Already Done (If You Don't Have To), but DRWOPHADIYDHT doesn't sound/look nice as an acronym. Perhaps a better way to express that sentiment is "lazyDRY", or "The re-use of prexisting libraries and code can save you a lot of time, and which effort you can put into your application at a higher level."</p>

<p>Or in other words, it is foolish to ignore the work that other people have done, unless you have a compelling reason to do so. If you really want to write your own IoC/DI container, then great, knock yourself out. No one is going to stop you.</p>

<p>I'm lazy though. Nanos gigantium humeris insidentes.</p>

<p>Depending on the blogs in your feed reader, or who you follow on Twitter, or just in general googling, you will probably come across references to the same group of IoC/DI containers. Chiefly:</p>

<ul>
    <li><a title="StructureMap on Github" href="http://structuremap.github.com/structuremap/index.html" target="_blank">StructureMap</a></li>
    <li><a title="Castle Windsor" href="http://www.castleproject.org/" target="_blank">Castle Windsor</a></li>
    <li><a title="AutoFac on Google code" href="http://code.google.com/p/autofac/" target="_blank">AutoFac</a></li>
    <li><a title="Ninject" href="http://ninject.org/" target="_blank">Ninject</a></li>
    <li><a href="http://www.codeplex.com/MEF/" target="_blank">MEF</a></li>
    <li><a href="http://msdn.com/unity">Unity</a></li>
    <li><a href="http://www.springframework.net/">Spring.net</a></li>
</ul>

<p>There are others, but it would seem hardly anyone uses them. Of those above, I have so far only used StructureMap and Ninject, and have really liked using both of them. I will try out the others at some point, but so far I've liked what I've seen in StructureMap and Ninject, I honestly don't think that any of the others will have anything better to offer me. Besides which, StructureMap has a built in method of using it as a plugin framework. Win.</p>

<h2>In Conclusion</h2>

<p>What can I draw from all this? I don't think that I wasted any of my time or effort in writing my own plugin framework. It was a worthwhile exercise which taught me a lot of things, and I urge you to do the same.</p>

      <p><a href="/2010/03/even-more-on-the-generic-plugin-manager/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2010/03/you-dont-have-to-kneel-at-the-altar-of-the-cult-of-apple/">You don't have to kneel at the altar of the cult of Apple</a></h1> 
      <div class="meta">
        <p class="posted">07 Mar 2010</p>
        <ul class="categories">
          <li><a href="/category/Uncategorized" title="Uncategorized">Uncategorized</a></li>
        </ul>
      </div>
      
      <h1>Unless you've been living under a rock</h1>

<p>You will have seen, heard and read the buzz about the Apple <a title="ipad on Apple.com" href="http://www.apple.com/ipad/" target="_blank">iPad</a>. What it is, what it does and why you should buy it. This post is not about all that - it's covered in excruciating detail elsewhere on your favourite tech site. Ever since the iPad was just a rumour, and since it was officially announced, we have been arguing about it at work. Whose going to buy one? Who is an idiot for wanting to buy one? Who is an idiot for not wanting to buy one?</p>

<blockquote>Note: I should mention that I do happen to own an iPhone (via an O2 two year(!) contract), and I think it is probably the best mobile phone I've ever owned, however, I will take some convincing to enter into another two year contract again. But I digress. I have a couple of old iPods, nothing else: I am not a <a title="Fanboy on wikipedia" href="http://en.wikipedia.org/wiki/Fan_%28person%29" target="_blank">fanboy</a>.</blockquote>

<p>The niche that the iPad and devices like it fill is undoubtedly there, or else these products would not be developed. The key thing here is "...and devices like it...". There isn't just the iPad to consider.� This is the fantastic thing about our society: we have a huge freedom of choice in our purchasing decisions. We are free to evaluate, consider and weigh all the pros and cons of a particular product before we make the commitment to purchase.</p>

<h1>Unless you are an Apple fanboy</h1>

<p>In which case, you have already sub-concisiously made the decision to purchase anything with an Apple logo on. Are you an Apple fan boy? You have a Mac of some discription. You bought (and probably still have) a first-gen iPod. You bought an iTouch the day it was release. You were the first in your office to get an iPhone. You were the first to upgrade to an iPhone 3G. You were the first to upgrade to an iPhone 3GS. You hammer F5 on your favourite liveblog of an Apple event. You wouldn't even consider buying a laptop from Asus, Acer or Dell (or whoever) which as powerful and costs half the price of something which has a fucking Apple logo on it.</p>

<p>Fanboy. Acolyte. Get out. You have already made your choice. You cannot win an arguement with someone who fanatically believes they are right.</p>

<h1>Open minded? Continue from here</h1>

<p>For those who are prepared to broaden our horizons, there is a bewildering array of choice just around the corner. Rather than rehash other people's hard work from around the interweb, and because I'm lazy, I refer you to this article on About.com: <a href="http://portables.about.com/od/otherdevices/tp/Slate_tablet_roundup.htm" target="_blank">http://portables.about.com/od/otherdevices/tp/Slate<em>tablet</em>roundup.htm</a>, which offers a succinct highlight of varous slate tablet computers. <a href="http://www.engadget.com/2010/03/05/microsofts-courier-digital-journal-exclusive-pictures-and-de/" target="_blank">Engadget also has some details</a> of Microsofts offering, the 'Courier', which looks promising.</p>

<h1>In Conclusion</h1>

<p>You do not have to kneel at the alter of the cult of Apple. You have a choice. Use it wisely.</p>

      <p><a href="/2010/03/you-dont-have-to-kneel-at-the-altar-of-the-cult-of-apple/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2010/03/git-plus-dropbox/">Git plus dropbox</a></h1> 
      <div class="meta">
        <p class="posted">04 Mar 2010</p>
        <ul class="categories">
          <li><a href="/category/Dropbox" title="Dropbox">Dropbox</a></li>
          <li><a href="/category/Git" title="Git">Git</a></li>
          <li><a href="/category/Git" title="Git">Git</a></li>
          <li><a href="/category/Source Control" title="Source Control">Source Control</a></li>
        </ul>
      </div>
      
      <p><a title="Link to earlier blog post." href="http://temporalcohesion.co.uk/2008/08/29/source-control-using-dropbox/" target="_self">Some time ago</a>, I wrote about using <a title="Link to dropbox.com" href="https://www.dropbox.com/" target="_blank">Dropbox </a>as a version control system. I now realise how naive� and short-sighted that thought was. At the time, it was my belief that a dropbox account could be suitable for maintaining version history, and after a fashion, it can be, because using the web client to view your files, you can see previous versions of� the files in your dropbox.</p>

<p>However, there are problems with this approach. Consider that you've changed several files, but then you realise that the changes you have made are not good enough, or just don't work. With svn, or vss (<em>vomit</em>), you can undo-checkout to get the previous version back, with dropbox you can roll back to the previous version - one file at a time. There is no branching, no merging, no tagging. Nothing like a traditional SCM tool should have.</p>

<p>Dropbox is after all, essentially just a folder that is backed up "to the cloud". If we use the right tool, we can take advantage of this properly.</p>

<h1>Enter Git</h1>

<p>What is <a title="Git SCM" href="http://git-scm.com/" target="_blank">Git</a>? Well, surely you must have at least heard of Git by now? If not, I refer you to the <a title="Wikipedia article about git" href="http://en.wikipedia.org/wiki/Git_(software)" target="_blank">wikipedia page</a> about Git. Ok? You're back?</p>

<p>The key aspect of Git which we can take advantage of is essentially the very nature of Git itself. Every Git clone is a full-repository, containing the full commit  history and full revision tracking capability for the project, and it does not rely on network access nor a central server.</p>

<p>Basically, the idea is that you initialise an empty, bare repository inside your dropbox folder, and then somewhere else on your filesystem, perhaps a development folder where you store all your projects, you clone the repo from dropbox, and do all your work on that clone. Then when you call 'git push origin master', your changes are pushed into the dropbox repo, ready to be synced up on other computers you use.</p>

<blockquote>Note: This is not a substitue for having a proper hosted Git repository, such as a project on Github, or somewhere else. However, it useful if you are working on something you aren't ready to put into the public domain, or you haven't yet decided to purchase an account on a private repository provider.</blockquote>

<h1>Setup</h1>

<p>Setting it up is fairly simple, but, I am going to assume that you have Dropbox and a dropbox account, Git and (if you are on Windows) GitExtensions, correctly installed already.</p>

<blockquote>Note: I have only tested this on Windows 7, but I wouldn't expect it to not work on any other system. As always YMMV.</blockquote>

<p>First, create a folder in your dropbox folder to house your projects, e.g. C:UsersStuartDocumentsMy Dropboxprojects or just store it in the root of your Dropbox, it's upto you. Don't forget to include quotes around any path that has a space in, or else it won't work.</p>

<p>[sourcecode language="bash"]</p>

<p>Stuart@LAPTOP ~/Documents/My Dropbox/projects
$ mkdir example</p>

<p>Stuart@LAPTOP ~/Documents/My Dropbox/projects
$ cd example</p>

<p>Stuart@LAPTOP ~/Documents/My Dropboxprojects/example
$ mkdir .git</p>

<p>Stuart@LAPTOP ~/Documents/My Dropbox/projects/example
$ cd .git/</p>

<p>Stuart@LAPTOP ~/Documents/My Dropbox/projects/example/example.git
$ git init --bare
Initialized empty Git repository in c:/Users/Stuart/Documents/My Dropbox/projects/example
/example.git/</p>

<p>[/sourcecode]</p>

<p>Then, in your development folder clone that repo.</p>

<p>[sourcecode language="bash"]
Stuart@LAPTOP /c/development/examples
$ git clone -v &quot;C:/Users/Stuart/Documents/My Dropbox/projects/example/.git&quot;
Initialized empty Git repository in c:/development/examples/example/.git/</p>

<p>Stuart@LAPTOP /c/development/examples
$ cd example/</p>

<p>Stuart@LAPTOP /c/development/examples/example (master)
$ touch example.txt</p>

<p>Stuart@STUART-LAPTOP /c/development/examples/example (master)
$ git add example.txt</p>

<p>Stuart@LAPTOP /c/development/examples/example (master)
$ git commit -m &quot;Added example file to initial commit&quot;
[master e9ac78d] Added example file to initial commit
 0 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 example.txt</p>

<p>Stuart@LAPTOP /c/development/examples/example (master)
$ git push origin master
Counting objects: 3, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (2/2), 253 bytes, done.
Total 2 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (2/2), done.
To C:/Users/Stuart/Documents/My Dropbox/projects/example/.git
 1e38d4e..e9ac78d� master -&gt; master
[/sourcecode]</p>

<p>Dropbox will sync the files into the cloud. On your other computer, the git repo will sync, then you can clone it, and find that you have all your history for your project as you would expect.</p>

      <p><a href="/2010/03/git-plus-dropbox/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2010/02/i-won-a-free-typemock-t-shirt-via-twitter/">I won a free Typemock t-shirt via Twitter!</a></h1> 
      <div class="meta">
        <p class="posted">17 Feb 2010</p>
        <ul class="categories">
          <li><a href="/category/Uncategorized" title="Uncategorized">Uncategorized</a></li>
          <li><a href="/category/winner" title="winner">winner</a></li>
        </ul>
      </div>
      
      <p>Recently I <a title="twitter.com/RoyOsherove" href="http://twitter.com/RoyOsherove/status/8633903086" target="_blank">re-tweeted something</a> from Roy Osherove, and as a consequence, I received a nice t-shirt today all the way from Israel! As a bonus, also visible is my copy of <a title="The Art of Unit Testing on Amazon.co.uk" href="http://www.amazon.co.uk/gp/product/1933988274?ie=UTF8&amp;tag=tempocohes-21&amp;linkCode=as2&amp;camp=1634&amp;creative=6738&amp;creativeASIN=1933988274">The Art of Unit Testing</a>, by Mr  Osherove.</p>

<p style="text-align: center;">

[caption id="attachment_151" align="aligncenter" width="300" caption="The t-shirt I won, and my copyof The Art of Unit Testing"]<a href="http://temporalcohesion.co.uk/wp-content/uploads/2010/02/tshirt_book.jpg"><img class="size-medium wp-image-151 " title="tshirt_book" src="http://temporalcohesion.co.uk/wp-content/uploads/2010/02/tshirt_book-300x225.jpg" alt="&quot;Legalize Unit Testing&quot; t-shirt" width="300" height="225" /></a>[/caption]

</p>

      <p><a href="/2010/02/i-won-a-free-typemock-t-shirt-via-twitter/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2009/11/more-on-the-generic-plugin-manager/">More on the generic plugin manager</a></h1> 
      <div class="meta">
        <p class="posted">02 Nov 2009</p>
        <ul class="categories">
          <li><a href="/category/C#" title="C#">C#</a></li>
          <li><a href="/category/Coding" title="Coding">Coding</a></li>
          <li><a href="/category/Plugin Manager" title="Plugin Manager">Plugin Manager</a></li>
        </ul>
      </div>
      
      <h4>Update:</h4>

<p>I've written some more about what I've learned whilst working on my plugin manager here: <a href="http://temporalcohesion.co.uk/2010/03/17/even-more-on-the-generic-plugin-manager/" target="_self">http://temporalcohesion.co.uk/2010/03/17/even-more-on-the-generic-plugin-manager/</a></p>

<p>A few months ago <a title="Writing a generic plugin manager" href="http://temporalcohesion.co.uk/2009/05/25/writing-a-generic-plugin-manager-in-c/" target="_self">I wrote about</a> writing a generic plugin loader/manager in C#, where I offered links to several articles and referenced a rather excellent book about C# which I had used to base my plugin loader on. I hadn't really given it much thought since then, but according to Google Analytic's, it's one of the most hit posts on my blog. Recently I had a request to release the source code.</p>

<p>Now when I first wrote that post, I was hesitant to include any code, and I still am - not because I think there is something new and unique with what I've done - but, rather that what I have written is not terribly difficult to write. I do not mean to sound snobbish or arrogant at all, I'm just telling you how it is, all I've done is to do a bit of reflection on assemblies in a folder, and load instances of certain interfaces.</p>

<p>Anyway...</p>

<p>The scenario is that you want to provide a way for for 3rd parties to be able to add additional functionality to your application at run time. We need to provide a common way for 3rd parties to be able to register their new functionality into our application, in order that the user can take advantage of the exciting new feature being added to the application.</p>

<p>Straight away, you should be thinking to yourself: Interface!</p>

<pre class="lang:csharp decode:1 " >

public interface IPlugin
 {
 /// &amp;lt;summary&amp;gt;
 /// Does what ever It is.
 /// &amp;lt;/summary&amp;gt;
 void Do(Action it);
 }

</pre>

<p>Anyone who now wants to create a plugin for our application must implement our IPlugin interface, as it defines the contract to which our application is bound to, in order to recognise and load plugins. Thus any assembly, that has a class which implements IPlugin is considered by our application to be a plugin which is capable of offering additional functionality.</p>

<p>We can now attempt to load our plugins. We need to have a class which can scan a folder for assemblies, scan those assemblies for types which implement IPlugin, and then create instances of them which our application can use. Loading the assemblies is easy:</p>

<pre class="lang:csharp decode:1 " >
public class PluginLoader&amp;lt;T&amp;gt;
{
 private IList&amp;lt;T&amp;gt; pluginsList = new List&amp;lt;T&amp;gt;();
 ...
}

...

public virtual IList&amp;lt;T&amp;gt; LoadPlugins()
 {
 foreach (string file in Directory.GetFiles(this.pluginFolderPath, &amp;quot;*.dll&amp;quot;, SearchOption.AllDirectories))
 {
 Assembly assembly = Assembly.LoadFile(file);
 this.LoadObjects(assembly);
 }

 return this.pluginsList;
 }
</pre>

<p>We create a generic class, so we can use it with any type of plugin, and not just ones which implement IPlugin, then it's just simple directory recursion to load all the files in the specified folder which have a file extension of .dll. The real magic happens in the LoadObjects() method.</p>

<pre class="lang:csharp decode:1 " >
var types = from t in assembly.GetTypes()
 where t.IsClass &amp;amp;&amp;amp;
 (t.GetInterface(typeof(T).Name) != null)
 select t;

 foreach (Type t in types)
 {
 T plugin = (T)assembly.CreateInstance(t.FullName, true);
 this.pluginsList.Add(plugin);
 }
</pre>

<p>Using LINQ, we extract all the types from the assembly which are classes, which implement the interface which is a typeof(T) - T being the type we specified when we instantiated the class. You could just as easily here specify the type should inherit from some other type, and you could also check to see if a class has some assembly level attribute.</p>

<p>Why would you want to do that? Well, we can use an assembly level attribute to decorate the plugin class with meta-data about the plugin, such as the author, a short description, the name of the plugin, and it's version.</p>

<pre class="lang:csharp decode:1 " >
public virtual KeyValuePair&amp;lt;string, List&amp;lt;KeyValuePair&amp;lt;string, string&amp;gt;&amp;gt;&amp;gt; GetPluginInformation(Type type)
 {
 var attributeInfo = from pa in type.GetCustomAttributes(false)
 where (pa.GetType() == typeof(PluginAttribute))
 select pa;

 foreach (PluginAttribute p in attributeInfo)
 {
 data.Add(new KeyValuePair&amp;lt;string, string&amp;gt;(&amp;quot;Author&amp;quot;, p.Author));
 data.Add(new KeyValuePair&amp;lt;string, string&amp;gt;(&amp;quot;Description&amp;quot;, p.Description));
 data.Add(new KeyValuePair&amp;lt;string, string&amp;gt;(&amp;quot;Name&amp;quot;, p.Name));
 name = p.Name;
 data.Add(new KeyValuePair&amp;lt;string, string&amp;gt;(&amp;quot;Type&amp;quot;, p.Type.ToString()));
 data.Add(new KeyValuePair&amp;lt;string, string&amp;gt;(&amp;quot;Version&amp;quot;, p.Version));
 }

 this.attributeInformation = new KeyValuePair&amp;lt;string, List&amp;lt;KeyValuePair&amp;lt;string, string&amp;gt;&amp;gt;&amp;gt;(name, data);

 return this.attributeInformation;
 }
</pre>

<p>Or you could create a struct to use as a DTO for the plugin meta-data, it's up to you.</p>

<p>I've removed all the comments and exception handling from the code I've posted purely just to save space, you'd really want to include that - especially the exception handling. But that's really all there is to it, you might want to have a property to access the actual plugin list, or return it from a LoadPlugins method, it's up to you.</p>

<p>You'll notice I've made the methods virtual, you may want to use this class as a base class in another class. For instance I've got an additional class which inherits from my plugin loader class which does specific tasks for a particular type of plugin, and another which does different tasks for a different type of plugin.</p>

      <p><a href="/2009/11/more-on-the-generic-plugin-manager/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2009/10/a-psake-build-script-example/">A psake build script example</a></h1> 
      <div class="meta">
        <p class="posted">26 Oct 2009</p>
        <ul class="categories">
          <li><a href="/category/build script" title="build script">build script</a></li>
          <li><a href="/category/C#" title="C#">C#</a></li>
          <li><a href="/category/Coding" title="Coding">Coding</a></li>
          <li><a href="/category/Powershell" title="Powershell">Powershell</a></li>
          <li><a href="/category/psake" title="psake">psake</a></li>
        </ul>
      </div>
      
      <p>I have recently started using psake to do some build automation at work, and I've found that there is not a great deal of information about how to write a build script using psake available on the internet. It isn't all that amazingly difficult if truth be told, however there are a couple of 'gotchas', and I would like to share what I have learned in the hopes that it benefits someone.</p>

<p>If you have not heard of it, <a title="psake project on Google Code" href="http://code.google.com/p/psake/" target="_blank">psake</a> is a"...build automation tool written in PowerShell", started by <a title="James Kovacs' blog" href="http://codebetter.com/blogs/james.kovacs/default.aspx" target="_blank">James Kovacs</a>. With it, you can write build scripts, with which you can automate the build and deployment of your .NET project. Recently the version <a title="psake 2.00 release annoucement" href="http://codebetter.com/blogs/james.kovacs/archive/2009/10/14/releasing-psake-v1-00-amp-psake-v2-00.aspx">1.00 and 2.0<strong> </strong>0 version were released</a>. Why two versions? Well, the 1.00 version is primarily for PowerShell 1.0, but psake 1.00 is being "retired". This article assumes the reader is using psake 2.01 and PowerShell 2.0.</p>

<p>A quick note here, I should point out the primary example I based my first build script on is <a title="Ayende Rahien Rhino Mocks build script" href="http://ayende.com/Blog/archive/2009/08/30/on-psake.aspx" target="_blank">Ayende Rahien's build script for Rhino Mocks</a>.</p>

<h2>Our first psake build script</h2>

<p>First, I have to make two assumptions:</p>

<ol>
    <li>I have to assume that you have PowerShell installed, if you are running Vista/Windows 7 then it's installed by default, if you are on XP, then it is a manual install.</li>
    <li>You have installed the psake module into Powershell - see the release announcement linked to above for details on how to do this.</li>
</ol>

<p>[caption id="attachment_120" align="alignleft" width="137" caption="Example solution"]<a href="http://temporalcohesion.co.uk/wp-content/uploads/2009/10/psake_example_solution.png"><img class="size-full wp-image-120    " title="psake_example_solution" src="http://temporalcohesion.co.uk/wp-content/uploads/2009/10/psake_example_solution.png" alt="Example solution" width="137" height="161" /></a>[/caption]</p>

<p>With those assumptions out of the way, we are going to write a build script to automate the building of a simple C# solution, containing a Windows Forms application, and two class library assemblies.</p>

<p>Hopefully this should be simple enough to easily follow along with what is happening in the build script, but complex enough that you can see how sophisticated your build scripts can be.</p>

<p>You can see that I have already taken the liberty of adding an extra file to the solution, "build.ps1", this is our build script, with which we can command psake to do great things for us.</p>

<p>With our solution setup, we can now write our first build script:</p>

<pre class="lang:powershell decode:1 " >
properties {
 $base_dir = Resolve-Path .
 $sln_file = &amp;quot;$base_dirWindowsFormsApplication.sln&amp;quot;
}

Task default -depends Compile

Task Compile {
 msbuild &amp;quot;$sln_file&amp;quot;
}
</pre>

<p>Open a command prompt into the directory containing the .sln file, which is where your build.ps1 script
should be, and run this command: invoke-psake .build.ps1 -taskList Compile</p>

<p>[caption id="attachment_123" align="aligncenter" width="300" caption="psake Compile task output"]<a href="http://temporalcohesion.co.uk/wp-content/uploads/2009/10/psake_Compile.png"><img class="size-medium wp-image-123" title="psake_Compile" src="http://temporalcohesion.co.uk/wp-content/uploads/2009/10/psake_Compile-300x296.png" alt="psake Compile task output" width="300" height="296" /></a>[/caption]</p>

<p>You should receive some output to the console window like the above.What the script does is to work out where on the file system the script is running, and gets the path to that folder, and builds the path to the specified solution file, and runs msbuild, passing the full path to the solution file as a parameter.</p>

<p>The script as it is has some drawbacks though. In it's current form, msbuild will only build the default configuration of the solution. What if we want to build a Debug version, or a Release version, or some other configuration we've created? Additionally, it doesn't let us specify a directory to put the built binaries, they just get put in the default locations as specified in the projects contained in the solution - what if we want to put them in a custom location?</p>

<p>If we modify our build script slightly, we can introduce this functionality. Firstly, we need to specify some additional properties:</p>

<pre class="lang:powershell decode:1 " >
properties {
 $base_dir = Resolve-Path .
 $build_dir = &amp;quot;$base_dirbuild&amp;quot;
 $sln_file = &amp;quot;$base_dirWindowsFormsApplication.sln&amp;quot;
 $debug_dir = &amp;quot;$build_dirDebug\&amp;quot;
 $release_dir = &amp;quot;$build_dirRelease\&amp;quot;;
}
</pre>

<p>Notice the double backslash, msbuild requires a trailing slash when paths are specified, and it seems to require the additional backslash as well, or else it doesn't work. With those additional properties in place, we can introduce two new tasks to our build script:</p>

<pre class="lang:powershell decode:1 " >
Task Clean {
 remove-item -force -recurse $debug_dir -ErrorAction SilentlyContinue
 remove-item -force -recurse $release_dir -ErrorAction SilentlyContinue
}

Task Init -depends Clean {
 new-item $debug_dir -itemType directory
 new-item $release_dir -itemType directory
}
</pre>

<p>Powershell's easy to read syntax should make it easy to follow with what is happening now. In the Clean task, we forcefully and recursively remove any files and the folder from the specified path, and if there are any errors then they are not displayed. Now that we know that those folders are going to be cleaned and created, we can create two further tasks, where we can create Debug and Release versions of our solution:</p>

<pre class="lang:powershell decode:1 " >
Task Debug -depends Init {
 msbuild $sln_file &amp;quot;/nologo&amp;quot; &amp;quot;/t:Rebuild&amp;quot; &amp;quot;/p:Configuration=Debug&amp;quot; &amp;quot;/p:OutDir=&amp;quot;&amp;quot;$debug_dir&amp;quot;&amp;quot;&amp;quot;
}

Task Release -depends Init {
 msbuild $sln_file &amp;quot;/nologo&amp;quot; &amp;quot;/t:Rebuild&amp;quot; &amp;quot;/p:Configuration=Release&amp;quot; &amp;quot;/p:OutDir=&amp;quot;&amp;quot;$release_dir&amp;quot;&amp;quot;&amp;quot;
</pre>

<p>Again, the syntax here is relatively straightforward to follow along with, we execute msbuild, passing it the solution file to build, specify not to show the logo (suppressing the output of "copyright microsoft msbuild etc), tell it to execute the rebuild target and to build the Debug configuration, copying the output to the specified debug directory. Notice that that there are no spaces in the paramters that we pass to msbuild. For example, if we passed the parameters like this: "/p:Configuration=Release /p:OutDir=""$release_dir""", then it would fail and we would get a msbuild parse error saying it was invalid.</p>

<p>[caption id="attachment_129" align="alignleft" width="196" caption="Build script output for Debug task"]<a href="http://temporalcohesion.co.uk/wp-content/uploads/2009/10/psake_example_debug.png"><img class="size-medium wp-image-129" title="psake_example_debug" src="http://temporalcohesion.co.uk/wp-content/uploads/2009/10/psake_example_debug-196x300.png" alt="Build script output for Debug task" width="196" height="300" /></a>[/caption]</p>

<h2>Summary</h2>

<p>In a relatively short amount of code, less than 30 lines, we have accomplished quite a lot. We can now issue the command: invoke-psake .build.ps1 -taskList Debug, and psake will automatically clean the output folders, do a full rebuild of the Debug configuration and copy the output to a custom location on our filesystem. What's more, the build script we have written is small, compact, easy to read, easy to maintain and easy to build/extend upon in the future.</p>

<p>As this is getting a bit long already, I'm going to cut things short here, however, there are some additional things that you can do as part of the build script that are very nice, such as automatically versioning the assembly before you do the full build. If you take a look at <a title="Ayende Rahien Rhino Mocks build script" href="http://ayende.com/Blog/archive/2009/08/30/on-psake.aspx" target="_blank">Ayende Rahien's example</a> from Rhino Mocks, that is covered there.</p>

<p>Also in the new version of psake, there are pre and post conditions and actions that you can add onto your tasks, although I haven't had the opportunity to use them yet. I'll try to cover those in a future blog post though.</p>

      <p><a href="/2009/10/a-psake-build-script-example/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2009/10/my-recommended-reading-list/">My recommended reading list</a></h1> 
      <div class="meta">
        <p class="posted">17 Oct 2009</p>
        <ul class="categories">
          <li><a href="/category/Books" title="Books">Books</a></li>
          <li><a href="/category/Books" title="Books">Books</a></li>
          <li><a href="/category/Coding" title="Coding">Coding</a></li>
        </ul>
      </div>
      
      <p>Love him or hate him, several years ago, Jeff Atwood (of Codinghorror.com infamy and the really rather awesome StackOverflow.com) <a title="Recommended reading on codinghorror.com" href="http://www.codinghorror.com/blog/archives/000020.html" target="_blank">posted on his blog</a> a recommended reading list for developers. He has since become a sort of mini internet programming celebrity. Since imitation is the greatest form of flattery, I present to you my own list of recommended reading.</p>

<p style="text-align: left;"></p>

<p>[caption id="attachment_100" align="alignleft" width="131" caption="Code Complete 2nd Edition"]<a href="http://www.amazon.co.uk/gp/product/0735619670?ie=UTF8&amp;tag=tempocohes-21&amp;linkCode=as2&amp;camp=1634&amp;creative=6738&amp;creativeASIN=0735619670"><img class="size-full wp-image-100 " title="Code Complete 2nd Edition" src="http://temporalcohesion.co.uk/wp-content/uploads/2009/10/51seLiYuURL._SL160_.jpg" alt="Code Complete 2nd Edition" width="131" height="160" /></a>[/caption]</p>

<p style="text-align: left;"><strong>Code Complete 2nd Edition</strong>, by <a title="SteveMcConnell.com" href="http://www.stevemcconnell.com/" target="_blank">Steve McConnel</a> should be recommended reading on software engineering degrees at Universities the world over. It is a classic book about the software industry. McConnel makes the distinction between average programmers, who are happy to go through the motions of churning out (usually terrible) code and collecting their wages; and above average programmers, who continually seek to improve their base knowledge, actively improving their skills, who write solid, well designed and easily maintainable code. I think this was the book that really changed my mindset about being a programmer, about being proud of the work I do and the programs I write and maintain.</p>

<p style="text-align: left;"></p>

<p style="text-align: left;"></p>

<p style="text-align: left;"></p>

<p>[caption id="attachment_103" align="alignright" width="121" caption="Working Effectively with Legacy Code"]<a href="http://www.amazon.co.uk/gp/product/0131177052?ie=UTF8&amp;tag=tempocohes-21&amp;linkCode=as2&amp;camp=1634&amp;creative=6738&amp;creativeASIN=0131177052"><img class="size-full wp-image-103  " title="Working Effectively with Legacy Code" src="http://temporalcohesion.co.uk/wp-content/uploads/2009/10/51TG9F1B8AL._SL160_.jpg" alt="Working Effectively with Legacy Code" width="121" height="160" /></a>[/caption]</p>

<p style="text-align: left;"><strong>Working Effectively with Legacy Code</strong>, by <a title="MichaelFeathers.com" href="http://www.michaelfeathers.com/" target="_blank">Michael Feathers</a> is another classic book, and another which I believe should be recommended reading on all University software engineering degrees. The reason I would recommended this book to any aspiring developer is that, more than likely they are going to be working with legacy code. I would say that 95% of the code I work with on a daily basis is legacy code, although that figure is slowly improving, thanks in a large part to the skills and knowledge I've gained from this book.� Feathers' defines legacy code as that which does not have unit tests. I would also add that most legacy code is often poorly designed, with no comments and is usually incredibly difficult to maintain. The book is split into three parts, the first part being about how you can bring about change in your legacy code base (and legacy developers!); the second part is like an FAQ, which links techniques together in a way to address common problems; the third part is a reference of the different dependency breaking techniques that can be employed to get your legacy code under test and under control.</p>

<p style="text-align: left;"></p>

<p style="text-align: left;"></p>

<p>[caption id="attachment_104" align="alignleft" width="128" caption="The Art of Unit Testing"]<a href="http://www.amazon.co.uk/gp/product/1933988274?ie=UTF8&amp;tag=tempocohes-21&amp;linkCode=as2&amp;camp=1634&amp;creative=6738&amp;creativeASIN=1933988274"><img class="size-full wp-image-104  " title="The Art of Unit Testing" src="http://temporalcohesion.co.uk/wp-content/uploads/2009/10/51PwNFas0pL._SL160_.jpg" alt="The Art of Unit Testing" width="128" height="160" /></a>[/caption]</p>

<p style="text-align: left;"><strong>The Art of Unit Testing</strong>, by <a title="ISerializable - Roy Osherove's Blog" href="http://weblogs.asp.net/ROsherove/" target="_blank">Roy Osherove</a>, is an excellent book, full of practical advice about unit testing. The book covers everything, from why you want to unit test your code, to how you can unit test code. Even if, as I had, you have written unit tests before, then you can still learn something from this book. Indeed there were several patterns on how to approach particular problems that I'd not even considered before. Also, I had never really gotten my head around using a mock object framework as part of my unit tests, but this book explains and demonstrates in a clear and concise manner, exactly how you can leverage your mock object framework of choice for your benefit. One minor criticism that I have though, is that I feel there is a certain element of bias toward <a title="Typemock Isolator, mock object framework" href="http://learn.typemock.com/" target="_blank">Typemock Isolator</a> - Osherove is a chief architect at Typemock.</p>

<p style="text-align: left;"></p>

<p style="text-align: left;"></p>

<p>[caption id="attachment_109" align="alignright" width="118" caption="Holub on Patterns"]<a href="http://www.amazon.co.uk/gp/product/159059388X?ie=UTF8&amp;tag=tempocohes-21&amp;linkCode=as2&amp;camp=1634&amp;creative=6738&amp;creativeASIN=159059388X"><img class="size-full wp-image-109  " title="Holub on Patterns" src="http://temporalcohesion.co.uk/wp-content/uploads/2009/10/51DbmGYuYuL._SL160_.jpg" alt="Holub on Patterns" width="118" height="160" /></a>[/caption]</p>

<p><strong>Holub on Patterns</strong>, by <a title="Holub.com" href="http://www.holub.com/" target="_blank">Allen Holub</a>, is another excellent book, about software design.� Design patterns offer an excellent way of not re-inventing the wheel, and Holub offers an entertaining and insightful tour of the majority of the <a title="The Famous Gang of Four book" href="href=&quot;http://www.amazon.co.uk/gp/product/0201633612?ie=UTF8&amp;tag=tempocohes-21&amp;linkCode=as2&amp;camp=1634&amp;creative=6738&amp;creativeASIN=0201633612&quot;" target="_blank">Gang of Four</a> patterns, and offers real world scenarios in which you would use them. The book is very opinionated, but this is not a bad thing, indeed it is refreshing to read as Holub is obviously very passionate about the subject. It certainly opened my eyes into the world of design patterns, as I'm one of these who finds concrete, interesting examples an excellent tool for learning, and I've always found the Gang of Four book rather dry.</p>

<p>[caption id="attachment_114" align="alignleft" width="128" caption="C# in Depth"]<a href="http://www.amazon.co.uk/gp/product/1933988363?ie=UTF8&amp;tag=tempocohes-21&amp;linkCode=as2&amp;camp=1634&amp;creative=6738&amp;creativeASIN=1933988363"><img class="size-full wp-image-114  " title="C# in Depth" src="http://temporalcohesion.co.uk/wp-content/uploads/2009/10/41-I8sBZWSL._SL160_.jpg" alt="C# in Depth" width="128" height="160" /></a>[/caption]</p>

<p><strong>C# In Depth</strong>, by <a title="Jon Skeet's Coding Blog" href="http://msmvps.com/blogs/jon_skeet/default.aspx" target="_blank">Jon Skeet</a> is an excellent book about the C# programming language. If you want to understand something about C#, and I mean really, truly understand why the language does what it does, then I suggest that you read this book. The book is clear and straightforward, with excellent examples. Honestly if most of the people posting C# questions on stackoverflow.com read this book, then I suspect the number of questions would stop increasing at the current rate.</p>

      <p><a href="/2009/10/my-recommended-reading-list/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2009/07/bending-jquery-to-my-will/">Bending jQuery to my will</a></h1> 
      <div class="meta">
        <p class="posted">27 Jul 2009</p>
        <ul class="categories">
          <li><a href="/category/Coding" title="Coding">Coding</a></li>
          <li><a href="/category/jQuery" title="jQuery">jQuery</a></li>
        </ul>
      </div>
      
      <p>Like many people, I have a vanity domain name, www.stuart-grassie.co.uk. Many moons ago I used to host my blog on there, but for a variety of reasons I bought this domain and switched my blog here. So I put up a basic index page, listing a few interesting factoids about me, and what I do. When I say a "basic" page, I mean basic - black text on a white background, almost as if it was just few words typed into a text file - although there was semantically correct and valid xhtml behind it.</p>

<p>The other day I came across a link,<a title="30 Examples of Extreme Minimalism in web design" href="http://singlefunction.com/30-examples-of-extreme-minimalism-in-web-design/" target="_blank"> 30 Examples of Extreme Minimalism in web design</a> and it inspired me to do a small make-over on my vanity domain name site. Which I think has turned out fairly ok. Athough that isn't the point of this blog post.</p>

<p>As there is not a massive amount of information (after all it's just a "here I am, here's some information about me, here's how you can contact me" site, all of it is on one page. I'm using jQuery to hide everything, until the user clicks a link to see the information they want. I used jQuery UI, to use a couple of basic slide in/out effects. The actual effects are "clip" and "blind", using "toggle" to turn them on/off. All the other content apart from the "frontpage" is hidden.</p>

<p>Initially, I had it working so that you could click a link, and the requested "page" would transition into view, the "frontpage" would transition out of view, then I had a &lt;span&gt;&lt;back&lt;/span&gt;, which I made react to mouse clicks, using jQuery, and you could then click back to the "frontpage".</p>

<pre lang="html">
<div id="main">
Maybe you would like to read this <a id="examplelink" href="#example">example</a> page.</div>
<div id="example">

This is some example content.</div></pre>

<pre lang="javascript">$(document).ready(function(){
    $("#example").hide(); // Hide the example on page load
});

// detect when the link is clicked, and toggle the two<div>'s
$(function() {
    $("#examplelink").click(function() {
    $("#example").toggle("clip", {}, 500);
        $("#main").toggle("blind", {}, 500);
    return false;
    });
});</pre>

<p>In my excitement to get this learned and done (I've never used jQuery before), I've lost the original code, but that's essentially what I had, without the code to detect when the fake back button <span>back</span> is clicked - all it did was to run the toggle again, which returned the user to the "frontpage". I had to to do it this way, because the browser forward/back doesn't work.</p>

<p>Clearly, this is not an ideal situation, because it has broken one of the cardinal web design guidelines, by breaking the users browser, by rendering the forward/back buttons inoperable.</p>

<p>I'll show you what I did next time.</p>

      <p><a href="/2009/07/bending-jquery-to-my-will/">Read more...</a></p>
    </li>
    <hr/>
    <li class="post">
      <h1><a href="/2009/07/adding-logging-to-an-application/">Adding logging to an application</a></h1> 
      <div class="meta">
        <p class="posted">25 Jul 2009</p>
        <ul class="categories">
          <li><a href="/category/C#" title="C#">C#</a></li>
          <li><a href="/category/Coding" title="Coding">Coding</a></li>
          <li><a href="/category/log4net" title="log4net">log4net</a></li>
          <li><a href="/category/Logging" title="Logging">Logging</a></li>
        </ul>
      </div>
      
      <p>Nearly every application I have ever used has produced some sort of log output, usually to record details of exactly what the application was doing when an error was encountered. To be perfectly truthful, it is not something that I have ever really given very much consideration to in either my own or work applications, there have always been more pressing things to attend to, such as meeting (unrealistic) deadlines, or implementing some interesting new feature. I've used log4j before in a work application, mostly because someone else had already done all the configuration.</p>

<p>However, the application that is currently occupying the main focus of my attention at work had (almost) no logging in it what-s0-ever, but given the nature of the application, it can be very difficult to debug exactly what is happening internally using breakpoints. Again, the nature of the application doesn't really lend itself well to showing MessageBox's all the over the place.</p>

<pre lang="csharp">MessageBox.Show("Log message");

// or..

Console.WriteLine("Log message");</pre>

<p>How many times have you done that, or the equivalent, in an application? If you are like me, then you'll have done it hundreds of times, probably in the same application. It's really quick and easy to do, and can be very useful. You just have to remember to take it out of the Release build. What a pain.</p>

<p><strong>A better way</strong></p>

<p>Using a proper logging library (as I have now discovered) allows you much greater freedom. Freedom to not have to (overly) worry about leaving in <em>Log.Debug("Some message")</em> all over the code. Freedom to be able to configure what is logged, where it is logged to and how it is displayed. Freedom to receive concrete data on how your application is behaving in the real world, which will enable you to find and fix bugs faster than you would have thought possible.</p>

<p>There are a multitude of logging libraries available:</p>

<ul>
    <li>Write your own</li>
    <li>System.Diagnostics.Trace and System.Diagnostics.Debug</li>
    <li>The Logging Application block from the <a title="Microsoft Enterprise Library" href="http://www.codeplex.com/entlib" target="_self">Enterprise Library</a></li>
    <li>Bitfactory.Logging from <a title="Bitfactory.Logging from theobjectguy" href="http://www.theobjectguy.com/dotnetlog/" target="_blank">http://www.theobjectguy.com/dotnetlog/</a></li>
    <li><a title="NLog C# logging library" href="http://csharp-source.net/open-source/logging/nlog" target="_blank">NLog</a></li>
    <li> Plus many more that you can find via google or on Stack Overflow.</li>
</ul>

<p>Now, while it would probably be an interesting exercise to write a small logging library, the world doesn't need another one, so I immediately discounted that option.</p>

<p>I've used System.Diagnostics here and there, and an ex-colleague wrote a small logging library based around using Trace and Debug, but that is getting dangerously close to writing your own logging library, so again that's out.</p>

<p>The Logging application block from the Enterprise Library just seems too weighty, and too much of a pain to configure (I can probably be proved wrong though), so I discounted that as well.</p>

<p>The object guy's logging library seems pretty good, but the documentation and examples kind of suck, and it doesn't look like it's been updated in a while, so after playing with it a little bit (and not really liking it all that much to be perfectly honest), I discounted that as well, although it does seem to have a lot of fans on Stack Overflow.</p>

<p>NLog has plenty of documentation, and seems pretty straightforward to use, and it too has a lot of fans on Stack Overflow, but again, it's not been updated in a while, so I discounted that too.</p>

<p><strong>Log4Net to the rescue</strong></p>

<p>Log4Net is part of the <a title="Apache Logging Services" href="http://logging.apache.org/" target="_self">Apache Logging Services</a> project, along with Log4j, and Log4Cxx. It is a C# port of Log4j, and works amazingly well. I am not going to write about how to set it up and configure it, as <a title="log4net info on beefycode.com" href="http://www.beefycode.com/category/log4net.aspx">others have done that already</a>, and the documentation is excellent.</p>

<p>I've read here and there on some blogs, a few message boards and some email lists, that log4net is difficult and time consuming to set-up, and that it is hard to use. Which is nonsense, because after ten minutes (which included downloading the latest version) I had my first small test application up and running and outputting debug messages to the Output window in Visual Studio. Pretty swish indeed.� I did spend some time reading about the best ways to use log4net, and I still do, but I didn't find the initial set-up to be inordinately difficult at all.</p>

<p>On the whole, I am impressed with it's ease of use, I'm now starting to use it in my own personal projects, and it is proving to be invaluable at work.</p>

      <p><a href="/2009/07/adding-logging-to-an-application/">Read more...</a></p>
    </li>
    <hr/>
  </ul> 

  <!-- Pagination links -->
  <div id="post-pagination" class="pagination">

   
      <p class="previous">
        <a href="/page2">Previous Page</a>
        </p>


    <p class="previous">
      <a href="/page4">Next Page</a>
    </p>

  </div>


                </div>
                <!-- #content -->
            </div>
            <!-- #primary .site-content -->
        </div>
        <!-- #main -->

        <footer class="site-footer" role="contentinfo">
            <div class="site-info">
                Powered by <a href="https://github.com/Sandra/Sandra.Snow" rel="generator">Sandra.Snow</a>.	
            </div>
            <!-- .site-info -->
        </footer>
        <!-- #colophon .site-footer -->
    </div>
    <!-- #page .hfeed .site -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src='/javascripts/prettify.js' type='text/javascript'></script>
    
    <script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-######-##']);
_gaq.push(['_trackPageview']);
        
(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>
    
    <script type='text/javascript'>
      $(function () {
        $("pre code").parent().each(function () {
          if (!$(this).hasClass("prettyprint")) {
            $(this).addClass("prettyprint");
            a = true
          }
        });

        prettyPrint();
      });
    </script>
</body>
</html>
